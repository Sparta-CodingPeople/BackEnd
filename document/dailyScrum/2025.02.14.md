# 📌 프로젝트 회의록

## 프로젝트 개요
- **프로젝트명**: `com.server.delivery` → [com.server.delivery](http://com.server.delivery)로 변경 예정
- **멀티 프로필 설정**: `local-dev-product`
- **패키지 구성 방식**: 도메인 중심
    - MSA에서는 계층형을 더 자주 사용 (관련 공부 필요)
    - 참고 자료: [https://zkdlu.tistory.com/2](https://zkdlu.tistory.com/2)

---

## 다국어 설정 논의
- 예외 메시지를 한국어로 제한할지 여부
    - 결론: **영어로 설정**
    - 이후 다국어 지원 추가 예정

---

## 예외 커스텀 방식
- **모든 예외 메시지 커스텀** → ✅
- **도메인별 예외 메시지 분리** → ✅

---

## 보안 및 인증
- **Spring Security + JWT 적용 필요**
    - JWT는 회원 및 API에서 인증된 유저인지 확인하는 어노테이션에서 사용
    - 즉시 작업 필요 → `회원 및 보안 담당 팀원` 진행

---

## Jira 도입
- **도입 여부**: ✅
- **이유**: 티켓별로 개발 진행 상황 및 이슈 공유 가능

---

## 역할 분배
### ✅ **선로**
- 회원
- 관리자
- AI

### ✅ **중건**
- 매장 관련
    - 매장 카테고리
    - 음식 카테고리
    - 서울 지역 코드
    - 가게 운영 시간
    - 매장-가게 운영 시간 (중간 테이블)
    - 가게 위치
- 메뉴
    - 매장-메뉴 관계

### ✅ **예나**
- 주문 관련
    - 주문-메뉴 관계
- 장바구니
    - 장바구니
    - 장바구니-메뉴 관계

### ✅ **은수**
- 결제
- 배송
    - 배송지

### ✅ 리뷰
- 리뷰
- 리뷰-이미지

---

## 🚀 프로젝트 진행 플로우 (튜터님 조언)
### 1️⃣ **전역 설정 (팀장 진행)**
- **GlobalExceptionHandler**
- **Security 설정 (완료 후 피드백)**
    - 인증 필터
    - 예외 처리 방식
- **Util**
    - `passwordUtil` → `Bcrypt` 암호화
    - `imageFileUtil` → `S3 업로드, 다운로드, 삭제`
- **Config**
    - `S3Config`
- **상수 정의 (`constant`)**
    - 상수 컨벤션 정리 (ENUM 타입)
    - 네이밍 규칙: `도메인_행위_상태` 또는 `도메인_오류유형`

### 2️⃣ 서비스 간 의존성 해결 방법
#### 🔹 예상 방법 1: **인터페이스를 통한 결합도 약화**
- 서비스 간 직접적인 의존성을 제거하고 **공통 인터페이스**를 도입하여 해결

#### 🔹 예상 방법 2: **Controller 단에서 개별 호출**
- 각 서비스에서 필요한 메서드를 직접 호출하여 분리

---

## 📌 **오늘 할 일 최종 정리**
### ✅ **컨벤션 정리**
- [x] 상수 컨벤션 정의
- [] 컨벤션을 `README.md`에 정리

### ✅ **전역 설정 공유**
- [x] `GlobalExceptionHandler`
- [ ] `S3 설정`
- [ ] `Security 설정`
    - [ ] 인증/인가

### ✅ **Jira 생성 및 역할 분배 정리**
- [x] Jira 생성 및 초대 -> 은수님이 생성
  - 일정 정리 및 가독성 개선효과

### ✅ **튜터님에게 질문할 내용**
- [x] DTO의 생성 메서드와 Mapper의 역할 중복 문제 해결 방법
    - 튜터님 의견:
        - Mapper를 사용하면 DTO가 많아질수록 복잡해짐
        - 목적에 맞는 구조가 중요하며, 개발자가 이해하기 쉬운 방식이 최선
        - 캐싱을 위해 Helper 클래스를 분리하여 사용 (`static` 메서드 활용)
        - 공통 전용 코드 레이어 추가 고려

- [x] JWT 사용 이유
    - 세션 저장 방식은 리소스 사용량 증가로 부적합
    - JWT는 정보를 클레임에 넣어 데이터 교환 시 검증 가능
    - **토큰 관리 방식**
        - 유저에게 `Access Token` + `Refresh Token` 제공
        - `유저 엔티티`에 발급 시점 기록 → 특정 시점 이전의 토큰은 무효화
        - Redis에 `TTL=30분` 저장
        - **캐시 미스** → null인 경우 패스
        - **캐시 히트** → 발급 시점이 오래된 경우 예외 발생

- [x] 서비스 간 직접 참조 없이 메서드를 호출하는 방식
  - 중간의 레이어를 통해 서브 트랜잭션을 수행하도록 하기
  - Helper 클래스를 두고 메서드 공통화
- [x] 도커를 전부 사용하면 **MSA 의미가 없어질수도 있다 각 서버를 띄우고 서버간 데이터를 독립적으로 관리하고 장애를 대처하는 경험이 필요하다!**  